<div dir="rtl">

# IUT Timelab (آی‌یو‌تی تایملب)

سامانه هوشمند تولید و بهینه‌سازی برنامهٔ درسی دانشگاه صنعتی اصفهان.

این ابزار به شما کمک می‌کند از بین ده‌ها گروه (section) مختلف دروس، سریع‌ترین مجموعهٔ بدون تداخل را بیابید، اولویت‌های شخصی را اعمال کنید و چند سناریوی جایگزین را مقایسه نمایید.

## ⭐️ ویژگی‌های اصلی
| گروه | توضیح |
|------|-------|
| تولید برنامه بدون تداخل | الگوریتم جست‌وجوی بازگشتی + حذف تکرار برای یافتن همهٔ ترکیب‌های معتبر |
| پشتیبانی چند گروه (Section) | نمایش جداگانه هر گروه و پیشنهاد جایگزین در صورت تداخل |
| گروه‌بندی دروس (Mutually Exclusive) | تعریف «مجموعهٔ گزینه‌ها» که از هر گروه فقط یک درس انتخاب شود |
| تقویم هفتگی مدرن | نمایش دقیق بازه‌های چندساعته، همپوشانی افقی و خطوط نیم‌ساعته |
| ترجیحات (Preferences) | زیرساخت امتیازدهی قابل توسعه (مانند صبح نبودن یا فشرده بودن) |
| ذخیره‌سازی محلی گروه‌ها | حفظ گروه‌های تعریف‌شده در localStorage |
| پایه Excel Import | اسکلت اولیه برای ورود داده‌های خام از فایل اکسل |

## 🗂 ساختار پوشه‌ها (خلاصه)
```
src/
	App.tsx              ریشهٔ رابط کاربری و مدیریت وضعیت
	CalendarView.tsx     رندر تقویم هفتگی (layout جدید absolute/grid)
	CourseSelector.tsx   انتخاب درس‌ها (نمایش هر section بصورت نام ترکیبی)
	GroupManager.tsx     مدیریت گروه‌های mutually exclusive
	solver.ts            موتور تولید برنامه + امتیازدهی + ادغام سناریوهای گروه
	grouping.ts          توابع ساخت سناریوهای انتخابی گروه‌ها
	excelUtils.ts        توابع کمکی (در حال توسعه برای ورود داده از اکسل)
	DataInput.tsx        ورودی/دکمه‌های جانبی (فعلاً تغییر نام به افزودن گروه)
	shared/types.ts      (در صورت وجود) انواع اشتراکی
```

## 🔧 نصب و اجرای توسعه (Development)
```powershell
npm install
npm start
```
این دستور: 
1. محیط Electron Forge را اجرا می‌کند. 
2. اسکریپت `copy-data.js` را بعد از استارت اجرا می‌کند (کپی یا همگام‌سازی داده‌ها).

اگر اولین بار است: مطمئن شوید Node 18+ نصب است.

## 🏗 ساخت بسته‌های قابل نصب
```powershell
npm run make
```
خروجی در پوشهٔ `out/` (یا مسیر پیش‌فرض Forge) ایجاد می‌شود. برای ویندوز از Squirrel استفاده می‌شود.

## 🧠 منطق گروه‌بندی دروس
در `grouping.ts` چند گام انجام می‌شود:
1. پاکسازی تکراری‌ها داخل هر گروه (dedupe). 
2. تولید ضرب دکارتی انتخاب‌ها (از هر گروه دقیقاً یک درس). 
3. ارسال هر سناریو به `solver` و ادغام نتایج بدون تولید برنامه‌های تکراری.

اگر تعداد گروه‌ها یا گزینه‌هایشان بزرگ شد، رشد ترکیبی (Explosion) رخ می‌دهد؛ در آینده می‌توان «حد آستانه» و توقف زودهنگام افزود.

## 🗓 نحوهٔ رندر رویدادها در تقویم
هر جلسه به دقیقه از `START_HOUR` پایه تبدیل، ارتفاع = مدت * ضریب پیکسل، و همپوشانی‌ها با تخصیص ستون پویا (greedy) حل می‌شود؛ پهنای ستون = (100 / ستون‌های فعال).

## 🛠 افزودن ترجیحات جدید
در حال حاضر ساختار ساده است؛ برای توسعه:
1. تعریف نوع/کلید ترجیح
2. افزودن وزن و تابع محاسبه در solver
3. جمع‌بندی امتیاز در مرحله رتبه‌بندی

## 📥 ورود داده از اکسل (طرح آینده)
`excelUtils.ts` می‌تواند توسعه یابد تا:
1. فایل Excel (`xlsx`) خوانده شود
2. ستون‌ها به ساختار استاندارد درس تبدیل گردد
3. کش یا JSON نرمال ذخیره شود

## 🚀 مسیرهای توسعه پیشنهادی
- محدودسازی پیچیدگی ترکیبات گروه (Pruning)
- رابط گرافیکی برای ترجیحات (Drag sliders / weights)
- Export برنامه به PDF / تصویر
- Sync ابری یا اشتراک لینک
- iCal (.ics) خروجی
- اعتبارسنجی پیشرفتهٔ فرمت زمان (جلوگیری از اشتباه تایپی)

## 🤝 مشارکت
Fork → Branch → Commit با پیام معنادار → Pull Request. پیش از PR:
```powershell
npm run lint
```

## ⚖️ مجوز
MIT License

## ✨ نام پروژه
«IUT Timelab» ترکیبی از هویت دانشگاه (IUT) و آزمایشگاه زمان (Time Lab) برای تأکید بر تحلیل و بهینه‌سازی است.

## ℹ️ پیکربندی ریپو
`package.json` شامل فیلدهای repository / bugs / homepage است؛ در صورت تغییر نام کاربری یا انتقال، آن‌ها را به‌روزرسانی کنید.

---
### English (Brief)
IUT Timelab is an intelligent timetable generator for Isfahan University of Technology. Features: conflict-free schedule engine, multi-section handling, mutually exclusive course groups, modern weekly calendar, extensible preference scoring, and (planned) Excel import.

Development:
```powershell
npm install
npm start
```
Build:
```powershell
npm run make
```
License: MIT

</div>
